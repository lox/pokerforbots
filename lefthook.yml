# Lefthook configuration
# Ensures code quality before commits

pre-commit:
  parallel: true
  commands:
    # Run all Go tests with race detector - MUST PASS
    go-test:
      run: bin/gotestsum --format=standard-quiet -- -race ./...
      fail_text: "Tests are failing! Fix all tests before committing."

    # Format Go code with golangci-lint
    go-fmt:
      glob: "**/*.go"
      run: bin/golangci-lint fmt {staged_files}
      fail_text: "Code formatting failed!"
      stage_fixed: true

    # Lint Go code with golangci-lint
    go-lint:
      run: bin/golangci-lint run ./...
      fail_text: "Linting failed! Fix all linter issues before committing."

